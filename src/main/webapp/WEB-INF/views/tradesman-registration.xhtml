<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

  <head>
    <title th:text="#{tradesman.registration}">Tradesman Registration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <link rel="stylesheet" th:href="@{resources/css/bootstrap.css}" />
    <link rel="stylesheet" th:href="@{resources/css/intlTelInput.css}" />
    
    <style type="text/css">
    	h5 {
    		font-weight: bold;
    	}
    
    	.panel-default {
			margin: 30px 20px;
		}

		#submit {
			margin-bottom: 20px;
		}

		#map {
		   width: 100%;
		   height: 400px;
		   background-color: grey;
		}
		
		#map-control {
			display: inline;
			box-shadow: 0px 4px 4px 0px rgba(0,0,0,0.50);
			border-width: 0px 0.5px 0.5px 0.5px;
			border-style: solid;
			border-color: #dbdbdb;
			border-radius: 3px;
		}
		
		.map-control-container {
			background-color: #fff;
			border-width: 0px 0.5px 0.5px 0.5px;
			border-style: solid;
			border-color: #dbdbdb;
			cursor: pointer;
			text-align: center;
			float: left;
		}
		
		.map-control-interior {
			color: rgb(25,25,25);
			font-family: Roboto,Arial,sans-serif;
			font-size: 14px;
			line-height: 38px;
			padding-left: 5px;
			padding-right: 5px;
		}
		
		.form-group .intl-tel-input {
			display: block;
		}
	</style>
  </head>

  <body>

	<div class="container panel panel-default" >
	
		<h1 th:text="#{tradesman.registration}">Tradesman Registration</h1>
		
	  	<div th:unless="${#strings.isEmpty(error)}">
	  		<p th:text="${error}">Cannot register at this time, please try again later.</p>
	  	</div>
	  
	  	<div class="details" th:if="${#strings.isEmpty(error)}">
	  		<form onsubmit="thymeleafScript.prepareForm()" method="post"
	  			  th:object="${form}" 
	  			  th:action="@{tradesmanRegistration}" action="#"  
	  			  enctype="multipart/form-data" >
	  			  
	  			  <ul th:if="${#fields.hasErrors('*')}">
  <li th:each="err : ${#fields.errors('*')}" th:text="${err}">Input is incorrect</li>
				</ul>
	  		
	  			<input type="hidden" name="leadId" id="leadId" 
	  				   th:field="*{leadId}"  />
	  			
	  			<div id="contact" th:insert="fragments/tradesman-registration :: contact-details" />
	  		
	  			<div id="company" th:insert="fragments/tradesman-registration :: company-details" />
	  			
	  			<div id="area" th:insert="fragments/tradesman-registration :: area-details" />
	  			
	  			<div id="feature" th:insert="fragments/tradesman-registration :: feature-details" />
	  		
	  			<input id="submit" type="submit" />
	  		
	  		</form>
	  	</div>
  	
  	</div>
  	
  	<script th:src="@{resources/js/jquery.js}"></script>
  	<script th:src="@{resources/js/bootstrap.js}"></script>
  	<script th:src="@{resources/js/utils.js}"></script>
  	<script th:src="@{resources/js/intlTelInput.js}"></script>
  	<script th:src="@{resources/js/tradesmanRegistration.js}"></script>
  	<script th:inline="javascript">
    /*<![CDATA[*/
	    
	    var thymeleafScript = new ThymeleafScript(
	    	    /*[[${baseApiUrl}]]*/ null, 
	    	    /*[[${authorizationToken}]]*/ null,
	    	    /*[[${initialMapAreaType}]]*/ null
	   	);

	    $('#telephone').intlTelInput({
			onlyCountries: ["za"],
			initialCountry: "za",
			allowDropdown: false,
			autoPlaceholder: "aggressive"
		});
	    
    /*]]>*/
	</script> 
  	<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBqA5tZjB_QeP7ONTgDQURWcafuavNVzNE&callback=thymeleafScript.initMap"></script>
  </body>

</html>